cmake_minimum_required(VERSION 3.10)

project(MQClient)

set(CMAKE_CXX_STANDARD 20)
set(CMAKE_CXX_STANDARD_REQUIRED)

add_executable(MQClient
    api.cc
    command_dispatcher.cc
    command_processor.cc
    fs.cc
    log.cc
    main.cc
    mqtt_client.cc
    network.cc
    tcp_client.cc
    utils.cc
    wrappers.cc
    encoders/base64.cc
    crypto.cc
    key_manager.cc
)

set_property(TARGET MQClient PROPERTY CXX_STANDARD 20)
set_property(TARGET MQClient PROPERTY CXX_STANDARD_REQUIRED ON)

target_link_directories(MQClient PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/paho/lib)
target_include_directories(MQClient PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/paho/include ${CMAKE_CURRENT_SOURCE_DIR}/encoders)
target_link_libraries(MQClient PRIVATE wininet ws2_32 urlmon paho-mqtt3c rpcrt4 stdc++fs ssl crypto)
